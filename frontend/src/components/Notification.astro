---
interface Props {
	id?: string;
	type?: string;
	title?: string;
	text: string;
}

const { id, type = 'default', title, text } = Astro.props;

const validTypes = ['info', 'success', 'caution', 'danger'];
const iconType = validTypes.includes(type) ? type : 'default';
const ariaRole = type === 'danger' ? 'alert' : 'status';
const ariaLive = type === 'danger' ? 'assertive' : 'polite';
---
<aside
    id={id}
    class="Notification"
    role={ariaRole}
    aria-live={ariaLive}
    data-type={iconType}
>
    <div class="icon">
        <svg aria-hidden="true" focusable="false" width="24" height="24">
            <use href={`#icon-${iconType}`}></use>
        </svg>
    </div>

    <div class="content">
        {title && <strong>{title}</strong>}
        <Fragment set:html={text} />
    </div>
</aside>

<style>
:root {
  --notification--borderWidth: 0.3em;
  --notification--iconSize: 1.75rem;
}

/* prettier-ignore */
:root {

/* LIGHT */

/* Default */
--notification--backgroundColor--default--light: var(--COLOR--N10);
--notification--borderColor--default--light: var(--COLOR--N60);
--notification--color--primary--default--light: var(--COLOR--N95);
--notification--color--secondary--default--light: var(--COLOR--N70);

/* Success */
--notification--backgroundColor--success--light: #e3f2e4;
--notification--borderColor--success--light: #64b96a;
--notification--color--primary--success--light: var(--COLOR--N95);
--notification--color--secondary--success--light: var(--COLOR--N70);

/* Info */
--notification--backgroundColor--info--light: var(--COLOR--B10);
--notification--borderColor--info--light: var(--COLOR--B50);
--notification--color--primary--info--light: var(--COLOR--N95);
--notification--color--secondary--info--light: var(--COLOR--N70);

/* Caution */
--notification--backgroundColor--caution--light: #fef1d7;
--notification--borderColor--caution--light: #fabc3c;
--notification--color--primary--caution--light: var(--COLOR--N95);
--notification--color--secondary--caution--light: var(--COLOR--N70);

/* Danger */
--notification--backgroundColor--danger--light: #fdedee;
--notification--borderColor--danger--light: #e63946;
--notification--color--primary--danger--light: var(--COLOR--N95);
--notification--color--secondary--danger--light: var(--COLOR--N70);


/* DARK */

/* Default */
--notification--backgroundColor--default--dark: var(--COLOR--N90);
--notification--borderColor--default--dark: var(--COLOR--N50);
--notification--color--primary--default--dark: var(--COLOR--N05);
--notification--color--secondary--default--dark: var(--COLOR--N70);

/* Success */
--notification--backgroundColor--success--dark: var(--COLOR--N90);
--notification--borderColor--success--dark: #64b96a;
--notification--color--primary--success--dark: #64b96a;
--notification--color--secondary--success--dark: var(--COLOR--N70);

/* Info */
--notification--backgroundColor--info--dark: var(--COLOR--N90);
--notification--borderColor--info--dark: var(--COLOR--B50);
--notification--color--primary--info--dark: var(--COLOR--B50);
--notification--color--secondary--info--dark: var(--COLOR--N70);

/* Caution */
--notification--backgroundColor--caution--dark: var(--COLOR--N90);
--notification--borderColor--caution--dark: #fabc3c;
--notification--color--primary--caution--dark: #fabc3c;
--notification--color--secondary--caution--dark: var(--COLOR--N70);

/* Danger */
--notification--backgroundColor--danger--dark: var(--COLOR--N90);
--notification--borderColor--danger--dark: #e63946;
--notification--color--primary--danger--dark: #e63946;
--notification--color--secondary--danger--dark: var(--COLOR--N70);
}

/* prettier-ignore */
:root {
color-scheme: light;

--notification--backgroundColor--default:           var(--notification--backgroundColor--default--light);
--notification--borderColor--default:               var(--notification--borderColor--default--light);
--notification--color--primary--default:            var(--notification--color--primary--default--light);
--notification--color--secondary--default:          var(--notification--color--secondary--default--light);

--notification--backgroundColor--info:              var(--notification--backgroundColor--info--light);
--notification--borderColor--info:                  var(--notification--borderColor--info--light);
--notification--color--primary--info:               var(--notification--color--primary--info--light);
--notification--color--secondary--info:             var(--notification--color--secondary--info--light);

--notification--backgroundColor--success:           var(--notification--backgroundColor--success--light);
--notification--borderColor--success:               var(--notification--borderColor--success--light);
--notification--color--primary--success:            var(--notification--color--primary--success--light);
--notification--color--secondary--success:          var(--notification--color--secondary--success--light);

--notification--backgroundColor--caution:           var(--notification--backgroundColor--caution--light);
--notification--borderColor--caution:               var(--notification--borderColor--caution--light);
--notification--color--primary--caution:            var(--notification--color--primary--caution--light);
--notification--color--secondary--caution:          var(--notification--color--secondary--caution--light);

--notification--backgroundColor--danger:            var(--notification--backgroundColor--danger--light);
--notification--borderColor--danger:                var(--notification--borderColor--danger--light);
--notification--color--primary--danger:             var(--notification--color--primary--danger--light);
--notification--color--secondary--danger:           var(--notification--color--secondary--danger--light);
}

/* prettier-ignore */
@media (prefers-color-scheme: dark) {
:root {
    color-scheme: dark;

    --notification--backgroundColor--default:       var(--notification--backgroundColor--default--dark);
    --notification--borderColor--default:           var(--notification--borderColor--default--dark);
    --notification--color--primary--default:        var(--notification--color--primary--default--dark);
    --notification--color--secondary--default:      var(--notification--color--secondary--default--dark);
    
    --notification--backgroundColor--info:          var(--notification--backgroundColor--info--dark);
    --notification--borderColor--info:              var(--notification--borderColor--info--dark);
    --notification--color--primary--info:           var(--notification--color--primary--info--dark);
    --notification--color--secondary--info:         var(--notification--color--secondary--info--dark);
    
    --notification--backgroundColor--success:       var(--notification--backgroundColor--success--dark);
    --notification--borderColor--success:           var(--notification--borderColor--success--dark);
    --notification--color--primary--success:        var(--notification--color--primary--success--dark);
    --notification--color--secondary--success:      var(--notification--color--secondary--success--dark);
    
    --notification--backgroundColor--caution:       var(--notification--backgroundColor--caution--dark);
    --notification--borderColor--caution:           var(--notification--borderColor--caution--dark);
    --notification--color--primary--caution:        var(--notification--color--primary--caution--dark);
    --notification--color--secondary--caution:      var(--notification--color--secondary--caution--dark);
    
    --notification--backgroundColor--danger:        var(--notification--backgroundColor--danger--dark);
    --notification--borderColor--danger:            var(--notification--borderColor--danger--dark);
    --notification--color--primary--danger:         var(--notification--color--primary--danger--dark);
    --notification--color--secondary--danger:       var(--notification--color--secondary--danger--dark);
}
}

/* prettier-ignore */
[data-appearance="light"] {
color-scheme: light;

--notification--backgroundColor--default:           var(--notification--backgroundColor--default--light);
--notification--borderColor--default:               var(--notification--borderColor--default--light);
--notification--color--primary--default:            var(--notification--color--primary--default--light);
--notification--color--secondary--default:          var(--notification--color--secondary--default--light);

--notification--backgroundColor--info:              var(--notification--backgroundColor--info--light);
--notification--borderColor--info:                  var(--notification--borderColor--info--light);
--notification--color--primary--info:               var(--notification--color--primary--info--light);
--notification--color--secondary--info:             var(--notification--color--secondary--info--light);

--notification--backgroundColor--success:           var(--notification--backgroundColor--success--light);
--notification--borderColor--success:               var(--notification--borderColor--success--light);
--notification--color--primary--success:            var(--notification--color--primary--success--light);
--notification--color--secondary--success:          var(--notification--color--secondary--success--light);

--notification--backgroundColor--caution:           var(--notification--backgroundColor--caution--light);
--notification--borderColor--caution:               var(--notification--borderColor--caution--light);
--notification--color--primary--caution:            var(--notification--color--primary--caution--light);
--notification--color--secondary--caution:          var(--notification--color--secondary--caution--light);

--notification--backgroundColor--danger:            var(--notification--backgroundColor--danger--light);
--notification--borderColor--danger:                var(--notification--borderColor--danger--light);
--notification--color--primary--danger:             var(--notification--color--primary--danger--light);
--notification--color--secondary--danger:           var(--notification--color--secondary--danger--light);
}

/* prettier-ignore */
[data-appearance="dark"] {
color-scheme: dark;

--notification--backgroundColor--default:           var(--notification--backgroundColor--default--dark);
--notification--borderColor--default:               var(--notification--borderColor--default--dark);
--notification--color--primary--default:            var(--notification--color--primary--default--dark);
--notification--color--secondary--default:          var(--notification--color--secondary--default--dark);

--notification--backgroundColor--info:              var(--notification--backgroundColor--info--dark);
--notification--borderColor--info:                  var(--notification--borderColor--info--dark);
--notification--color--primary--info:               var(--notification--color--primary--info--dark);
--notification--color--secondary--info:             var(--notification--color--secondary--info--dark);

--notification--backgroundColor--success:           var(--notification--backgroundColor--success--dark);
--notification--borderColor--success:               var(--notification--borderColor--success--dark);
--notification--color--primary--success:            var(--notification--color--primary--success--dark);
--notification--color--secondary--success:          var(--notification--color--secondary--success--dark);

--notification--backgroundColor--caution:           var(--notification--backgroundColor--caution--dark);
--notification--borderColor--caution:               var(--notification--borderColor--caution--dark);
--notification--color--primary--caution:            var(--notification--color--primary--caution--dark);
--notification--color--secondary--caution:          var(--notification--color--secondary--caution--dark);

--notification--backgroundColor--danger:            var(--notification--backgroundColor--danger--dark);
--notification--borderColor--danger:                var(--notification--borderColor--danger--dark);
--notification--color--primary--danger:             var(--notification--color--primary--danger--dark);
--notification--color--secondary--danger:           var(--notification--color--secondary--danger--dark);
}



    :where(.Notification) {
  --_borderWidth: var(--notification--borderWidth);
  --_iconSize: var(--notification--iconSize);

  padding: 1rem;
  background-color: var(--_backgroundColor);
  border-radius: 0.3rem;
  border-inline-start: var(--_borderWidth) solid var(--_accentColor);
  margin-block-end: 2rem;
  max-inline-size: 50rem;
  display: grid;
  grid-template-columns: auto 1fr;
  column-gap: 2rem;

  > .icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    > svg {
      color: var(--_iconColor);
      inline-size: var(--_iconSize);
      block-size: var(--_iconSize);
    }
  }

  > .content {
    display: flex;
    flex-direction: column;
    gap: 1rem;

    > strong {
      color: var(--_colorPrimary);
      font-family: var(--fontFamily--heading);
      margin-block: 0;
    }
  }

  &[data-type="default"] {
    --_accentColor: var(--notification--borderColor--default);
    --_backgroundColor: var(--notification--backgroundColor--default);
    --_iconColor: var(--notification--borderColor--default);
    --_colorPrimary: var(--notification--color--primary--default);
  }

  &[data-type="info"] {
    --_accentColor: var(--notification--borderColor--info);
    --_iconColor: var(--notification--borderColor--info);
    --_backgroundColor: var(--notification--backgroundColor--info);
    --_colorPrimary: var(--notification--color--primary--info);
  }

  &[data-type="success"] {
    --_accentColor: var(--notification--borderColor--success);
    --_iconColor: var(--notification--borderColor--success);
    --_backgroundColor: var(--notification--backgroundColor--success);
    --_colorPrimary: var(--notification--color--primary--success);
  }

  &[data-type="caution"] {
    --_accentColor: var(--notification--borderColor--caution);
    --_iconColor: var(--notification--borderColor--caution);
    --_backgroundColor: var(--notification--backgroundColor--caution);
    --_colorPrimary: var(--notification--color--primary--caution);
  }

  &[data-type="danger"] {
    --_accentColor: var(--notification--borderColor--danger);
    --_iconColor: var(--notification--borderColor--danger);
    --_backgroundColor: var(--notification--backgroundColor--danger);
    --_colorPrimary: var(--notification--color--primary--danger);
  }
}

</style>