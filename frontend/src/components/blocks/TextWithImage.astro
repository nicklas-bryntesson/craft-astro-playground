---
const { block } = Astro.props;

const verticalTextAlignment = block.verticalTextAlignment || 'top';
const image = block.image?.[0];
const imageAlignment = block.horisontalImageAlignment || 'right';
const imageAspectRatio = block.aspectRatio || 'landscape';
---

<div 
    class="TextWithImage Block" 
    data-block-theme=""
    data-vertical-text-alignment={verticalTextAlignment}
    data-image-alignment={imageAlignment} 
    data-image-aspect-ratio={imageAspectRatio}
>
    <div class="Component">
        <div class="content">
            {block.title && <h2>{block.title}</h2>}
            <div set:html={block.textContentBlock.html}></div>
        </div>
        <figure class="image">
            <img src={image.url} alt={block.title || ''} width={image.width} height={image.height} class="" loading="lazy" />
        </figure>
    </div>
</div>

<style is:global>
    .TextWithImage {
        margin-inline: 0;
    }
</style>

<style scoped>
.TextWithImage {
    

    margin-block: var(--size--2xl);

    & .Component {
        display: grid;
        grid-template-columns: var(--breakoutGrid--columns);
        column-gap: var(--breakoutGrid--gap);

        & .content {
            grid-row: 1;
            display: flex;
            flex-direction: column;
        }

        & .image {
            position: relative;
            grid-row: 1;
            overflow: hidden;

            > img {
                position: absolute;
                inset: 0;
                inline-size: 100%;
                block-size: 100%;
                object-fit: cover;
            }
        }
    }


    &[data-vertical-text-alignment="top"] .content {
        justify-content: start;
    }
    &[data-vertical-text-alignment="middle"] .content {
        justify-content: center;
    }
    &[data-vertical-text-alignment="bottom"] .content {
        justify-content: end;
    }

    &[data-image-aspect-ratio="square"] {
        & .image {
            aspect-ratio: 1;
        }
    }

    &[data-image-aspect-ratio="landscape"] {
        & .image {
            aspect-ratio: 16/9;
        }
    }

    &[data-image-aspect-ratio="portrait"] {
        & .image {
            aspect-ratio: 3/4;
        }
    }

    &[data-image-aspect-ratio="golden"] {
        & .image {
            aspect-ratio: 1.618/1;
        }
    }

    &[data-image-alignment="right"] {
        & .content {
            grid-column: 3/8;
        }

        & .image {
            grid-column: 9/15;
            border-start-start-radius: 1rem;
            border-end-start-radius: 1rem;
        }
    }

    &[data-image-alignment="left"] {
        & .content {
            grid-column: 9/14;
        }

        & .image {
            grid-column: 1/8;

            & img {
                border-start-end-radius: 1rem;
                border-end-end-radius: 1rem;
            }
        }
    }
}
</style>